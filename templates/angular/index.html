<!doctype html>
<html ng-app="pftApp">
<head>
  <link type="text/css" rel="stylesheet" href="/css/common.css" />
  <link type="text/css" href="/css/custom-theme/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.8.2/css/jquery.dataTables.css">

  <script type="text/javascript" src="/js/lib/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="/js/lib/jquery-ui-1.8.18.custom.min.js"></script>
  <script type="text/javascript" src="/js/lib/amplify.min.js"></script>
  <script type="text/javascript" src="/js/lib/highcharts.js"></script>
  <script type="text/javascript" src="/js/lib/angular-1.0.0.js"></script>
  <script type="text/javascript" src="/js/lib/angular-bootstrap-1.0.0.js"></script>
  <script type="text/javascript" src="/js/lib/angular-bootstrap-prettify-1.0.0.js"></script>
  <script type="text/javascript" src="/js/lib/angular-resource-1.0.0.js"></script>

  <script type="text/javascript" src="/js/state.js"></script>
  <script type="text/javascript" src="/js/transaction_dialog.js"></script>
  <script type="text/javascript" src="/js/account_transfer_dialog.js"></script>
  <script type="text/javascript" src="/js/charts.js"></script>
  <script type="text/javascript" src="/js/categories.js"></script>
  <script type="text/javascript" src="/js/accounts.js"></script>

  <script type="text/javascript" src="/js/directives.js"></script>
  <script type="text/javascript" src="/js/app_ctrl.js"></script>

  <title>PFT: overview</title>
</head>
<body ng-controller="pft.AppCtrl">
<div class="site_content">
  <header>
    <div class="right_block">
      <a href="#">Change profile</a>
      <span class="gray_name">({{ profile.name }})</span>

      <a href="{{ profileData.logout_url }}">Log out</a>
      <span class="gray_name">({{ profileData.google_user.nickname }})</span>
    </div>

    <div class="left_block">
      <a href="/">Home</a>
      <a href="/#">Reports</a>
      <a href="/#">Profile settings</a>
    </div>
  </header>

  <div class="fast_access_bar">
    <button pft-button icon="ui-icon-circle-plus">
      Add expense
    </button>
    <button pft-button icon="ui-icon-csv">
      Import from file
    </button>
    <button pft-button icon="ui-icon-transferthick-e-w">
      Transfer money between accounts
    </button>
  </div>

  <div pft-categories-widget class="standard_block_with_title"></div>

  <div class="standard_block_divider"></div>

  <div pft-accounts-widget class="standard_block_with_title"></div>

  <!-- end categories -->

  <div class="standard_block_with_title">
    <div class="title">Current month</div>
    <a class="details_link" href="/edit_budget">details</a>
    <div class="standard_block full_page_block">
      <div class="item" ng-repeat="item in budget.budget_items">
        <a href="/transaction_report?category_id={{ item.category_id }}"
           ng-show="item.category_id != null">
          <span class="name category">{{ item.name }}</span>
        </a>
        <span class="name"
              ng-hide="item.category_id != null">{{ item.name }}</span>

        <span class="balance">{{ item.amount | number:0 }}</span>
        <span class="currency">{{ profile.main_currency}}</span>
        <span class="chart_line"
              style="width: {{ (item.amount / budget.max_expense * 100) | number:0 }}px">
        </span>
      </div>

      <div class="item total">
        <span class="name">Common savings</span>
        <span class="balance">{{ budget.common_savings | number:0 }}</span>
        <span class="currency">{{ profile.main_currency}}</span>
        <span class="chart_line"
              style="width: {{ (budget.common_savings / budget.max_expense * 100) | number:0 }}px">
        </span>
      </div>
      <a class="details_link" id="view-on-chart" href="javascript:void(0)">
        view on chart</a>
    </div>
  </div>

  <!-- Dialogs -->

  <div id="edit-category-dialog" style="display: none">
    <label>
      Name:
      <input id="edit-category-name" />
    </label>
    <br>
    <label>
      Category balance:
      <input id="edit-category-balance" />
    </label>
  </div>

  <div id="edit-account-dialog" style="display: none">
    <label>
      Name:
      <input id="edit-account-name" />
    </label>
    <br>
    <label>
      Currency:
      <input id="edit-account-currency" />
    </label>
    <br>
    <label>
      Account balance:
      <input id="edit-account-balance" />
    </label>
  </div>

  <!-- Debug -->

  <br>
  <button ng-click="profileVisible = !profileVisible">Show profile JSON</button>
  <pre ng-show="profileVisible">{{ profileDataFormatted }}</pre>

  <br>
  <button ng-click="budgetVisible = !budgetVisible">Show budget JSON</button>
  <pre ng-show="budgetVisible">{{ budgetFormatted }}</pre>
</div>
</body>
</html>
