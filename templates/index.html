{% extends "templates/base.html" %}

{% block head %}
  <title>PFT: overview</title>
{% endblock %}

{% block content %}
  <div class="standard_block_with_title">
    <div class="title">Categories</div>
    <div class="standard_block half_page_block">
      {% for category in profile.categories %}
        <div class="item">
          <span class="name">{{ category.name|escape }}</span>
          <span class="balance">{{ category.balance|int }}</span>
          <span class="currency">{{ profile.main_currency}}</span>
        </div>
      {% endfor %}
      <div class="item total">
        <span class="name">Common savings</span>
        <span class="balance">{{ (total_balance - categories_total_balance)|int }}</span>
        <span class="currency">{{ profile.main_currency}}</span>
      </div>
    </div>
  </div
  ><div class="standard_block_divider"></div
  ><div class="standard_block_with_title">
    <div class="title">Accounts</div>
    <div class="standard_block half_page_block">
      {% for account in profile.accounts %}
        <div class="item">
          <span class="name">{{ account.name|escape }}</span>
          <span class="balance">{{ account.balance|int }}</span>
          <span class="currency">{{ account.currency}}</span>
        </div>
      {% endfor %}
      <div class="item total">
        <span class="name">Total</span>
        <span class="balance">{{ total_balance|int }}</span>
        <span class="currency">{{ profile.main_currency}}</span>
      </div>
      <a class="details_link" href="/accounts_overview">see all</a>
    </div>
  </div>

  <div class="standard_block_with_title">
    <div class="title">Current month</div>
    <a class="details_link" href="/edit_budget">details</a>
    <div class="standard_block full_page_block">
      {% for item in budget_items %}
        <div class="item">
          <span class="name">{{ item.name|escape }}</span>
          <span class="balance">{{ item.amount|int }}</span>
          <span class="currency">{{ profile.main_currency}}</span>
          <span class="chart_line"
                style="width: {{ (item.amount / max_expense * 100)|int }}px">
          </span>
        </div>
      {% endfor %}
      <div class="item total">
        <span class="name">Common savings</span>
        <span class="balance">{{ common_savings|int }}</span>
        <span class="currency">{{ profile.main_currency}}</span>
        <span class="chart_line"
              style="width: {{ (common_savings / max_expense * 100)|int }}px">
        </span>
      </div>
    </div>
  </div>
{% endblock %}
